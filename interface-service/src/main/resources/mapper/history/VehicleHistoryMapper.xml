<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.enc.dao.mapper.history.VehicleHistoryMapper" >

    <select id="getHisVehicleListSql" parameterType="com.enc.domain.platform.vo.history.vehicle.VehicleListQueryVo" resultType="java.util.Map" >
        select
            id,car_logo carLogo,car_plate carPlate,color,
            camera_id cameraId,picture,start_time startTime,
            create_date createDate
        from
            t_vehicle
        <where>
            <if test="carPlate != '' and carPlate != null">
                and car_plate LIKE CONCAT('%',#{carPlate},'%')
            </if>
            <if test="cameraId != '' and cameraId != null">
                and camera_id = #{cameraId}
            </if>
            <if test="beginDate != '' and beginDate != null">
                and create_date &gt;= #{beginDate}
            </if>
            <if test="endDate != '' and endDate != null">
                and create_date &lt;= #{endDate}
            </if>
        </where>
        order by id desc
    </select>

    <select id="getHisVehicleTopSql" parameterType="com.enc.domain.platform.vo.history.vehicle.VehicleListQueryVo" resultType="java.util.Map" >
        select *,'vehicle' web_socket_type from t_vehicle where
        DATE_FORMAT(start_time,'%Y-%c-%d') = #{date}
        order by id desc limit 0,2
    </select>

</mapper>














